###########################################
### NVIDIA Driver 304.137 Remove
###########################################
# Debian
LIB=lib
LIB64=lib/x86_64-linux-gnu
LIB32=lib/i386-linux-gnu

# Fedora /openSUSE
LIB=lib64
LIB64=lib64
LIB32=lib

## Remove all 64-bit library
sudo rm -f /usr/$LIB/xorg/modules/drivers/nvidia_drv.so
sudo rm -f /usr/$LIB/nvidia/xorg/modules/extensions/libglx.so.$NV_VER
sudo rm -f /usr/$LIB/nvidia/xorg/modules/extensions/libglx.so.1
sudo rm -f /usr/$LIB/nvidia/xorg/modules/extensions/libglx.so
sudo rm -f /usr/$LIB64/nvidia/libGL.so.$NV_VER
sudo rm -f /usr/$LIB64/nvidia/libGL.so.1
sudo rm -f /usr/$LIB64/nvidia/libGL.so
sudo rm -f /usr/$LIB64/libnvidia-glcore.so.$NV_VER
sudo rm -f /usr/$LIB64/vdpau/libvdpau_nvidia.so.$NV_VER
sudo rm -f /usr/$LIB64/vdpau/libvdpau_nvidia.so.1
sudo rm -f /usr/$LIB64/vdpau/libvdpau_nvidia.so
sudo rm -f /usr/$LIB64/libcuda.so.$NV_VER
sudo rm -f /usr/$LIB64/libcuda.so
sudo rm -f /usr/$LIB64/libnvcuvid.so.$NV_VER
sudo rm -f /usr/$LIB64/libnvcuvid.so.1
sudo rm -f /usr/$LIB64/libnvidia-tls.so.$NV_VER
sudo rm -f /usr/$LIB64/libnvidia-cfg.so.$NV_VER
sudo rm -f /usr/$LIB64/libnvidia-cfg.so.1
sudo rm -f /usr/$LIB64/libnvidia-ml.so.$NV_VER
sudo rm -f /usr/$LIB64/libnvidia-ml.so
sudo rm -f /etc/OpenCL/vendors/nvidia.icd
sudo rm -f /usr/$LIB64/libnvidia-compiler.so.$NV_VER
sudo rm -f /usr/$LIB64/libnvidia-opencl.so.$NV_VER
sudo rm -f /usr/$LIB64/libnvidia-opencl.so
sudo rm -f /usr/$LIB64/nvidia/libOpenCL.so.1.0.0
sudo rm -f /usr/$LIB64/nvidia/libOpenCL.so
sudo rm -f /usr/$LIB/nvidia/libXvMCNVIDIA.so.$NV_VER
sudo rm -f /usr/$LIB/nvidia/libXvMCNVIDIA.so.1
sudo rm -f /usr/$LIB/nvidia/libXvMCNVIDIA.so
sudo rm -f /usr/$LIB/nvidia/xorg/modules/libnvidia-wfb.so.$NV_VER
sudo rm -f /usr/$LIB/nvidia/xorg/modules/libnvidia-wfb.so
sudo rm -f /usr/$LIB/nvidia/xorg/modules/libwfb.so
sudo rm -f /usr/bin/nvidia-settings
sudo rm -f /usr/share/man/man1/nvidia-settings.1.gz
sudo rm -f /usr/share/applications/nvidia-settings.desktop
sudo rm -f /usr/share/pixmaps/nvidia-settings.png
sudo rm -f /usr/bin/nvidia-xconfig
sudo rm -f /usr/share/man/man1/nvidia-xconfig.1.gz
sudo rm -f /usr/bin/nvidia-smi
sudo rm -f /usr/share/man/man1/nvidia-smi.1.gz
sudo rm -f /usr/bin/nvidia-bug-report.sh
sudo rm -f /usr/bin/nvidia-cuda-proxy-control
sudo rm -f /usr/bin/nvidia-cuda-proxy-server
sudo rm -f /usr/share/man/man1/nvidia-cuda-proxy-control.1.gz
sudo rm -f /usr/share/licenses/nvidia/LICENSE
sudo rm -f /usr/share/doc/nvidia/README
sudo rm -f /usr/share/doc/nvidia/NVIDIA_Changelog
sudo rm -f /usr/$LIB/nvidia/xorg/modules/libwfb.so

## Remove all 32-bit library
sudo rm -f /usr/$LIB32/nvidia/libGL.so.$NV_VER
sudo rm -f /usr/$LIB32/nvidia/libGL.so.1
sudo rm -f /usr/$LIB32/nvidia/libGL.so
sudo rm -f /usr/$LIB32/libnvidia-glcore.so.$NV_VER
sudo rm -f /usr/$LIB32/vdpau/libvdpau_nvidia.so.$NV_VER
sudo rm -f /usr/$LIB32/vdpau/libvdpau_nvidia.so.1
sudo rm -f /usr/$LIB32/vdpau/libvdpau_nvidia.so
sudo rm -f /usr/$LIB32/libcuda.so.$NV_VER
sudo rm -f /usr/$LIB32/libcuda.so
sudo rm -f /usr/$LIB32/libnvidia-tls.so.$NV_VER
sudo rm -f /usr/$LIB32/libnvidia-compiler.so.$NV_VER
sudo rm -f /usr/$LIB32/libnvidia-opencl.so.$NV_VER
sudo rm -f /usr/$LIB32/libnvidia-ml.so.$NV_VER
sudo rm -f /usr/$LIB32/nvidia/libOpenCL.so.1.0.0
sudo rm -f /usr/$LIB32/nvidia/libOpenCL.so

sudo /sbin/ldconfig

## Remove kms
NV_VER='304.137'
sudo /usr/sbin/dkms remove -m nvidia -v "$NV_VER" --all
